{
  "metrics": [
    {
      "name": "test-coverage",
      "type": "numeric",
      "description": "Test coverage percentage for the codebase",
      "command": "bun test --coverage --coverage-reporter=lcov >/dev/null 2>&1 && awk -F'[: ,]' '/^DA:/ { total_lines++; if ($3 > 0) hit_lines++ } END { if (total_lines > 0) printf \"%.2f\", (hit_lines / total_lines) * 100; else print \"0\" }' coverage/lcov.info",
      "unit": "%"
    },
    {
      "name": "lines-of-code",
      "type": "numeric",
      "description": "Total lines of TypeScript code in src/ directory",
      "command": "find src/ -name '*.ts' -not -path '*/node_modules/*' | xargs wc -l | tail -1 | awk '{print $1}' || echo '0'",
      "unit": "LOC"
    },
    {
      "name": "total-bundle-size",
      "type": "numeric",
      "description": "Total size of all compiled GitHub Actions",
      "command": "find .github/actions/*/dist/*.js -type f 2>/dev/null | xargs wc -c 2>/dev/null | tail -1 | awk '{print $1}' || echo '0'",
      "unit": "bytes"
    }
  ]
}
